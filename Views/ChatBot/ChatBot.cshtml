@model Culturi.Models.ChatBotViewModel

@{
    ViewData["Title"] = "ChatBot";
}
@{
    Layout = null;
}



<head>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="~/css/site.css" />

</head>
<body>
     <header class="custom-header">


    <nav class="navbar navbar-expand-lg navbar-dark custom-nav">
       
        <div class="container-fluid">


            <!-- Logo -->
      <img class = "logo-header" src="/img/Home/logoSVG.svg" alt="logo">

            <!-- Bot√≥n de Bootstrap para responsive (oculta solo el nav normal, NO EL HAMBURGUESA) -->
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>

            <!-- NAV NORMAL -->
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-3">

                    <!-- HOME -->
                    <li class="nav-item">
                        <a class="nav-link" href="/Home/Home">Home</a>
                    </li>

                    <!-- JUEGOS -->
              <li class="nav-item">
                        <a class="nav-link" href="/Juego/Index">Juego</a>
                    </li>


                    <!-- GRUPOS -->
                    <li class="nav-item">
                        <a class="nav-link" href="/Comunidades/Grupos">Grupos</a>
                    </li>

                    <!-- TR√ÅMITES -->
                    <li class="nav-item">
                        <a class="nav-link" href="/Tramite/">Tr√°mites</a>
                    </li>

          
                    <!-- MAPA -->
                    <li class="nav-item">
                        <a class="nav-link" href="/Mapa/Index">Mapa</a>
                    </li>

                    <!-- NOTICIAS -->
                    <li class="nav-item">
                        <a class="nav-link" href="/Noticias/Noticias">Noticias</a>
                    </li>

                </ul>
            </div>


        </div>
    </nav>

    <!-- MENU LATERAL HAMBURGUESA -->
 

<div id="sideMenu" class="side-menu">

    <button id="closeBtn" class="close-menu-btn">‚Üê</button>

    <div class="side-menu-links">
         <a href="/Home/Home">Home</a>
        <a href="@Url.Action("Index", "Juego")">Juegos</a>
        <a href="/Comunidades/Grupos">Grupos</a>
        <a href="/Tramite/">Tr√°mites</a>
        <a href="/Mapa/Index">Mapa</a>
        <a href="/Noticias/Noticias">Noticias</a>
        <a href='@Url.Action("Perfil", "Usuario")'>Perfil</a>
        <a href="/Usuario/Noti">Notificaciones</a>
        <a href='@Url.Action("ChatBot", "ChatBot")'>ChatBot</a>
        <a href='@Url.Action("CerrarSesion", "Usuario")'>Cerrar Sesi√≥n</a>


    </div>
    

</div>
            <!-- BOT√ìN HAMBURGUESA PERSONALIZADO (A LA DERECHA SIEMPRE) -->
            <button class="menu-btn fixed-btn" id="menuBtn">‚ò∞</button>



</header>


<div class="chat-container">



    <div class="chat-messages">
        @if (Model.History != null)
        {
            foreach (var message in Model.History)
            {
                if (message.IsUserMessage)
                {
                    <div class="message-user">
                        <p>@message.Content</p>
                    </div>
                }
                else
                {
                    <div class="message-bot">
                        <p>@message.Content</p>
                    </div>
                }
            }
        }
    </div>

    <form method="post" action="/ChatBot/ChatBot" class="chat-form">

        <div class="input-wrapper">
            <textarea name="userMessage" class="input-message" placeholder="Escrib√≠ un mensaje..."></textarea>
        </div>

        <div class="form-buttons">
            <button type="button" class="icon-btn">üòä</button>
            <label class="icon-btn">
                üìé
                <input type="file" hidden>
            </label>
            <button type="submit" class="send-btn">‚û§</button>
        </div>

    </form>

</div>


     <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script>
    const menuBtn = document.getElementById("menuBtn");
    const closeBtn = document.getElementById("closeBtn");
    const sideMenu = document.getElementById("sideMenu");

    // Abrir men√∫ lateral
    menuBtn.addEventListener("click", () => {
        sideMenu.classList.add("open");
        menuBtn.style.display = "none"; 
    });

    // Cerrar men√∫ lateral
    closeBtn.addEventListener("click", () => {
        sideMenu.classList.remove("open");
        menuBtn.style.display = "block";
    });

    // Cerrar con ESC
    document.addEventListener("keydown", (e) => {
        if (e.key === "Escape") {
            sideMenu.classList.remove("open");
            menuBtn.style.display = "block";
        }
    });

    const chatMessages = document.querySelector('.chat-messages');
    chatMessages.scrollTop = chatMessages.scrollHeight;


</script>
</body>